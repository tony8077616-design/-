<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è‡ªé–‰ç—‡å‹å–„å¤§ä½¿å°æ¸¬é©—</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7fb;
      margin: 0;
      padding: 0;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 16px;
    }
    .card {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      padding: 24px;
      margin-top: 24px;
    }
    h1, h2 {
      margin: 0 0 12px;
    }
    h1 {
      font-size: 1.8rem;
      color: #1f4fc9;
    }
    h2 {
      font-size: 1.2rem;
      color: #333;
    }
    .intro {
      font-size: 0.95rem;
      color: #555;
      line-height: 1.6;
    }
    .question-text {
      font-size: 1.05rem;
      margin-bottom: 16px;
      line-height: 1.6;
    }
    .options {
      list-style: none;
      padding: 0;
      margin: 0 0 16px;
    }
    .options li {
      margin-bottom: 10px;
    }
    .options label {
      display: block;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #d3daf0;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
      font-size: 0.98rem;
    }
    .options input {
      display: none;
    }
    .options input:checked + span {
      background: #e6eeff;
      border-color: #1f4fc9;
    }
    .options span {
      display: block;
      border-radius: 8px;
      padding: 8px 10px;
      border: 1px solid transparent;
    }
    .btn-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 16px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: background 0.15s, transform 0.05s;
    }
    .btn-primary {
      background: #1f4fc9;
      color: #fff;
    }
    .btn-primary:hover {
      background: #163ba0;
    }
    .btn-secondary {
      background: #e1e6f5;
      color: #333;
    }
    .btn-secondary:hover {
      background: #ccd4f0;
    }
    button:active {
      transform: scale(0.97);
    }
    .hint {
      margin-top: 10px;
      padding: 10px 12px;
      background: #f3f6ff;
      border-left: 4px solid #1f4fc9;
      border-radius: 8px;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    .hint-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .feedback {
      margin-top: 8px;
      font-size: 0.95rem;
      font-weight: 600;
    }
    .correct {
      color: #1c7c2a;
    }
    .incorrect {
      color: #c62828;
    }
    .progress {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 4px;
    }
    .score-big {
      font-size: 2rem;
      font-weight: 700;
      color: #1f4fc9;
      margin-bottom: 8px;
    }
    .result-text {
      font-size: 1rem;
      line-height: 1.7;
    }
    .badge {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #e8f5e9;
      color: #1b5e20;
      font-size: 0.85rem;
      font-weight: 600;
    }
    @media (max-width: 600px) {
      .card {
        padding: 16px;
      }
      .btn-row {
        flex-direction: column-reverse;
        align-items: stretch;
      }
      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- é–‹å§‹ç•«é¢ï¼šåŒ…å«åå­—è¼¸å…¥ -->
    <div class="card" id="start-screen">
      <h1>ğŸŒŸ æŒ‘æˆ°ï¼šæˆç‚ºè‡ªé–‰ç—‡å‹å–„å¤§ä½¿</h1>
      <p class="intro">
        å…ˆè¼¸å…¥ä½ çš„åå­—ï¼Œå†é–‹å§‹ 6 é¡Œå°æ¸¬é©—ã€‚<br>
        æ¯é¡Œä½œç­”å¾Œæœƒçœ‹åˆ°æ­£ç¢ºç­”æ¡ˆèˆ‡ã€Œå¤§ä½¿ç§˜ç¬ˆã€ï¼Œä¸€æ­¥æ­¥å­¸ç¿’å¦‚ä½•æˆç‚ºå‹å–„å¤§ä½¿ã€‚
      </p>

      <label for="user-name" style="font-size:0.95rem;display:block;margin-bottom:6px;">
        è«‹è¼¸å…¥ä½ çš„åå­—ï¼ˆæˆ–æš±ç¨±ï¼‰ï¼š
      </label>
      <input
        id="user-name"
        type="text"
        placeholder="ä¾‹å¦‚ï¼šå°æ˜ã€å°ç¾"
        style="width:100%;padding:8px 10px;border-radius:8px;border:1px solid #d3daf0;font-size:0.95rem;box-sizing:border-box;margin-bottom:14px;"
      />

      <button class="btn-primary" onclick="startQuiz()">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <!-- æ¸¬é©—ç•«é¢ -->
    <div class="card" id="quiz-screen" style="display:none;">
      <div class="progress" id="progress-text"></div>
      <h2 id="question-title"></h2>
      <p class="question-text" id="question-text"></p>
      <ul class="options" id="options-list"></ul>
      <div class="feedback" id="feedback"></div>
      <div class="hint" id="hint" style="display:none;">
        <div class="hint-title">ğŸ’¡ å¤§ä½¿ç§˜ç¬ˆï¼š</div>
        <div id="hint-text"></div>
      </div>
      <div class="btn-row">
        <button class="btn-secondary" onclick="prevQuestion()">ä¸Šä¸€é¡Œ</button>
        <button class="btn-primary" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
      </div>
    </div>

    <!-- çµæœç•«é¢ï¼šæœƒé¡¯ç¤ºåå­— -->
    <div class="card" id="result-screen" style="display:none;">
      <h1>æ¸¬é©—å®Œæˆ ğŸ‰</h1>
      <p id="user-greeting" style="font-size:1rem;margin:8px 0 12px;"></p>
      <div class="score-big" id="score-text"></div>
      <p class="result-text" id="result-detail"></p>
      <span class="badge" id="badge-text"></span>
      <div class="btn-row" style="margin-top:20px;">
        <button class="btn-secondary" onclick="restartQuiz()">å†åšä¸€æ¬¡</button>
      </div>
    </div>
  </div>

  <script>
    // æŠŠé€™è£¡æ›æˆä½ è‡ªå·±çš„ Apps Script Web App URL
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyVF_S_XOkqTMJ_aAFc0O1PU0e_lpNiBUMqV1zP2hW4wR8YPdOqXLrZPoq9ZvqhvDF1/exec";

    const questions = [
      {
        title: "Q1",
        text: "è«‹å•ä¸‹åˆ—å“ªäº›ç—‡ç‹€æ˜¯è‡ªé–‰ç—‡é¡ç¾¤çš„å¸¸è¦‹ç‰¹è³ªï¼Ÿ",
        options: [
          "(A) é¡¯è‘—çš„ç¤¾äº¤æºé€šå›°é›£ã€å›ºè‘—è¡Œç‚ºèˆ‡æ„Ÿå®˜ç•°å¸¸",
          "(B) åªæœ‰æš´åŠ›æ”»æ“Šè¡Œç‚ºèˆ‡æƒ…ç·’å¤±æ§",
          "(C) å–œæ­¡æ•…æ„èªªè¬Šèˆ‡æƒ¡ä½œåŠ‡"
        ],
        correctIndex: 0,
        hint: "æ ¹æ“šé‘‘å®šè¾¦æ³•èˆ‡ç‰¹å¾µä»‹ç´¹ï¼Œè‡ªé–‰ç—‡çš„æ ¸å¿ƒç‰¹è³ªåŒ…å«ã€Œé¡¯è‘—çš„ç¤¾äº¤æºé€šåŠäº’å‹•å›°é›£ã€ä»¥åŠã€Œå›ºå®šè€Œæœ‰é™çš„è¡Œç‚ºæ¨¡å¼åŠèˆˆè¶£ã€ï¼ˆå¦‚å›ºè‘—è¡Œç‚ºã€ç‹¹éš˜èˆˆè¶£ã€æ„Ÿå®˜éæ•ç­‰ï¼‰ã€‚"
      },
      {
        title: "Q2",
        text: "ç•¶è‡ªé–‰ç—‡åŒå­¸å‡ºç¾ã€Œç”©æ‰‹ã€æˆ–ã€Œèº«é«”æ–æ™ƒã€ç­‰é‡è¤‡å‹•ä½œæ™‚ï¼Œèº«ç‚ºå‹å–„å¤§ä½¿è©²æ€éº¼åšï¼Ÿ",
        options: [
          "(A) å¤§è²åˆ¶æ­¢ä»–ï¼Œå«ä»–åå¥½",
          "(B) è¦ºå¾—å¾ˆå¥‡æ€ªï¼Œä¸€ç›´ç›¯è‘—ä»–çœ‹æˆ–æ¨¡ä»¿ä»–",
          "(C) ç†è§£é€™æ˜¯ä»–è‡ªæˆ‘æ”¾é¬†æˆ–èª¿ç¯€ç„¦æ…®çš„æ–¹å¼ï¼Œåªè¦ä¸å½±éŸ¿åˆ¥äººï¼Œå°±çµ¦äºˆå°Šé‡"
        ],
        correctIndex: 2,
        hint: "é€™äº›ã€Œåˆ»æ¿å‹•ä½œï¼ˆStimmingï¼‰ã€é€šå¸¸æ˜¯ä»–å€‘åœ¨èˆˆå¥®ã€ç„¦æ…®æˆ–ç„¡èŠæ™‚ï¼Œç”¨ä¾†è®“å¤§è…¦æ”¾é¬†å’Œè‡ªæˆ‘èª¿ç¯€çš„æ–¹å¼ï¼Œä¸¦ä¸éœ€è¦åˆ»æ„çŸ¯æ­£æˆ–å˜²ç¬‘ã€‚"
      },
      {
        title: "Q3",
        text: "èˆ‡è‡ªé–‰ç—‡åŒå­¸èªªè©±æ™‚ï¼Œç‚ºäº†é¿å…èª¤æœƒï¼Œå“ªç¨®æºé€šæ–¹å¼æœ€é©åˆï¼Ÿ",
        options: [
          "(A) èªªè©±ç›´æ¥å…·é«”ï¼Œé¿å…ä½¿ç”¨è«·åˆºã€é–‹ç©ç¬‘æˆ–æ‹å½æŠ¹è§’çš„æ–¹å¼",
          "(B) å¤šç”¨æˆèªå’Œé›™é—œèªï¼Œæ¯”è¼ƒå¹½é»˜é¢¨è¶£",
          "(C) è¬›åè©±ï¼Œä¾‹å¦‚è¦ºå¾—ä»–åšä¸å¥½æ™‚æ•…æ„èª‡çä»–"
        ],
        correctIndex: 0,
        hint: "è‡ªé–‰ç—‡è€…å°æ–¼èªè¨€ç†è§£è¼ƒç‚ºå­—é¢ï¼Œå®¹æ˜“è½ä¸æ‡‚æ½›å°è©æˆ–åè«·ï¼ˆä¾‹å¦‚æŠŠè«·åˆºç•¶ç¨±è®šï¼‰ï¼Œæ‰€ä»¥ã€Œç›´æ¥èªªã€æ˜¯æœ€å¥½çš„æºé€šæ–¹å¼ã€‚"
      },
      {
        title: "Q4",
        text: "ä½ ç™¼ç¾è‡ªé–‰ç—‡åŒå­¸è½åˆ°å­¸æ ¡é˜è²æˆ–å»£æ’­è²æ™‚æœƒç—›è‹¦åœ°æ‘€ä½è€³æœµï¼Œé€™å¯èƒ½æ˜¯å› ç‚ºï¼Ÿ",
        options: [
          "(A) ä»–æƒ³è¦å¼•äººæ³¨æ„",
          "(C) ä»–çš„æ„Ÿå®˜éåº¦æ•æ„Ÿï¼Œè¦ºå¾—è²éŸ³åƒé‡åˆºä¸€æ¨£ç—›è‹¦",
          "(D) ä»–çš„è½åŠ›ä¸å¥½"
        ],
        correctIndex: 1,
        hint: "é€™æ˜¯ã€Œæ„Ÿå®˜ç•°å¸¸ã€çš„ä¸€ç¨®è¡¨ç¾ï¼Œå°ä¸€èˆ¬äººæ­£å¸¸çš„è²éŸ³ï¼Œå°ä»–å€‘ä¾†èªªå¯èƒ½åˆ†è²éé«˜ä¸”åˆºè€³ï¼Œè«‹ä¸è¦æ•…æ„è£½é€ å™ªéŸ³åˆºæ¿€ä»–ã€‚"
      },
      {
        title: "Q5",
        text: "æŸæ¬¡ä½ æƒ³é‚€è«‹è‡ªé–‰ç—‡åŒå­¸ä¸€èµ·è¡Œå‹•ï¼Œä½†ä»–æ‹’çµ•æˆ–æ˜¯å®Œå…¨ä¸ç†ä½ ï¼Œé€™æ™‚å€™è©²æ€éº¼è¾¦ï¼Ÿ",
        options: [
          "(A) å¼·è¿«ä»–ä¸€å®šè¦åŠ å…¥å¤§å®¶",
          "(B) å°Šé‡ä»–çš„æ„é¡˜ï¼Œç†è§£ä»–å¯èƒ½ç¾åœ¨åªæƒ³ç¨è™•",
          "(C) è¯åˆå…¶ä»–åŒå­¸ä»¥å¾Œéƒ½ä¸ç†ä»–"
        ],
        correctIndex: 1,
        hint: "ä¸»å‹•é‚€è«‹æ˜¯å¾ˆæ£’çš„å–„æ„ï¼Œä½†å¦‚æœä»–æ‹’çµ•æˆ–æ²’åæ‡‰ï¼Œå¯èƒ½åªæ˜¯å› ç‚ºä»–éœ€è¦ä¼‘æ¯ç©ºé–“ï¼Œè«‹å°Šé‡ä»–çš„æ‹’çµ•ï¼Œä¸è¦è¦ºå¾—å—å‚·ã€‚"
      },
      {
        title: "Q6",
        text: "è«‹å•ä¸‹åˆ—å“ªäº›ç—…ç—‡éƒ½ç®—æ˜¯è‡ªé–‰ç—‡ï¼Ÿ",
        options: [
          "(A) äºæ–¯ä¼¯æ ¼",
          "(B) é«˜åŠŸèƒ½ / ä½åŠŸèƒ½è‡ªé–‰ç—‡",
          "(C) ä»¥ä¸Šçš†æ˜¯"
        ],
        correctIndex: 2,
        hint: "ã€Œè‡ªé–‰ç—‡é¡ç¾¤ã€åŒ…å«äºæ–¯ä¼¯æ ¼ã€é«˜åŠŸèƒ½èˆ‡ä½åŠŸèƒ½è‡ªé–‰ç—‡ç­‰ä¸åŒè¡¨ç¾å‹ï¼Œé›–ç„¶èƒ½åŠ›å·®ç•°å¾ˆå¤§ï¼Œä½†éƒ½å±¬æ–¼è‡ªé–‰ç—‡å…‰è­œçš„ä¸€éƒ¨åˆ†ã€‚"
      }
    ];

    let current = 0;
    let score = 0;
    let userName = "";
    const answers = new Array(questions.length).fill(null);

    const startScreen = document.getElementById("start-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");
    const progressText = document.getElementById("progress-text");
    const questionTitle = document.getElementById("question-title");
    const questionText = document.getElementById("question-text");
    const optionsList = document.getElementById("options-list");
    const feedback = document.getElementById("feedback");
    const hintBox = document.getElementById("hint");
    const hintText = document.getElementById("hint-text");
    const nextBtn = document.getElementById("next-btn");
    const scoreText = document.getElementById("score-text");
    const resultDetail = document.getElementById("result-detail");
    const badgeText = document.getElementById("badge-text");
    const userNameInput = document.getElementById("user-name");
    const userGreeting = document.getElementById("user-greeting");

    function startQuiz() {
      const name = userNameInput.value.trim();
      if (!name) {
        alert("è«‹å…ˆè¼¸å…¥ä½ çš„åå­—æˆ–æš±ç¨±ï¼Œå†é–‹å§‹æŒ‘æˆ°å–”ï¼");
        return;
      }
      userName = name;

      startScreen.style.display = "none";
      resultScreen.style.display = "none";
      quizScreen.style.display = "block";
      current = 0;
      score = 0;
      for (let i = 0; i < answers.length; i++) {
        answers[i] = null;
      }
      renderQuestion();
    }

    function renderQuestion() {
      const q = questions[current];
      progressText.textContent = `ç¬¬ ${current + 1} é¡Œ / å…± ${questions.length} é¡Œ`;
      questionTitle.textContent = q.title;
      questionText.textContent = q.text;
      optionsList.innerHTML = "";
      feedback.textContent = "";
      feedback.className = "feedback";
      hintBox.style.display = "none";
      hintText.textContent = "";

      q.options.forEach((opt, index) => {
        const li = document.createElement("li");
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = "option";
        input.value = index;

        const span = document.createElement("span");
        span.textContent = opt;

        label.appendChild(input);
        label.appendChild(span);
        li.appendChild(label);
        optionsList.appendChild(li);

        label.addEventListener("click", () => {
          selectAnswer(index);
          input.checked = true;
        });
      });

      nextBtn.textContent = current === questions.length - 1 ? "çœ‹çµæœ" : "ä¸‹ä¸€é¡Œ";
    }

    function selectAnswer(index) {
      const q = questions[current];
      const isCorrect = index === q.correctIndex;

      // è¨˜éŒ„åŸå§‹ä½œç­”ï¼ˆçµ¦å¾Œå°ç”¨ï¼‰
      answers[current] = index;

      feedback.textContent = isCorrect ? "âœ… å›ç­”æ­£ç¢ºï¼" : "âŒ é€™é¡Œå¯ä»¥å†æƒ³æƒ³ï¼Œä¸‹æ–¹æœ‰æç¤ºå–”ã€‚";
      feedback.className = "feedback " + (isCorrect ? "correct" : "incorrect");
      hintBox.style.display = "block";
      hintText.textContent = q.hint;
    }

    function nextQuestion() {
      if (current < questions.length - 1) {
        current++;
        renderQuestion();
      } else {
        calculateScore();
        showResult();
        sendResultToSheet();
      }
    }

    function prevQuestion() {
      if (current > 0) {
        current--;
        renderQuestion();
      }
    }

    function calculateScore() {
      score = 0;
      for (let i = 0; i < questions.length; i++) {
        if (answers[i] === questions[i].correctIndex) {
          score++;
        }
      }
    }

    function showResult() {
      quizScreen.style.display = "none";
      resultScreen.style.display = "block";

      userGreeting.textContent = `${userName}ï¼Œé€™æ˜¯ä½ çš„æˆç¸¾ï¼š`;
      scoreText.textContent = `${score} / ${questions.length} åˆ†`;

      let msg = "";
      let badge = "";
      if (score === questions.length) {
        msg = "å¤ªå²å®³äº†ï¼ä½ å°è‡ªé–‰ç—‡ç‰¹è³ªèˆ‡å‹å–„ç›¸è™•æ–¹å¼éå¸¸ç†Ÿæ‚‰ï¼Œå·²ç¶“å…·å‚™æˆç‚ºã€Œè‡ªé–‰ç—‡å‹å–„å¤§ä½¿ã€çš„çŸ¥è­˜èˆ‡æ…‹åº¦ã€‚";
        badge = "â­ è‡ªé–‰ç—‡å‹å–„å¤§ä½¿ LV.3ï¼šè¶…å°ˆæ¥­";
      } else if (score >= 4) {
        msg = "å¾ˆä¸éŒ¯ï¼Œä½ å·²ç¶“æŒæ¡å¤šæ•¸é‡è¦è§€å¿µï¼Œå†å¤šç·´ç¿’å¹¾æ¬¡ã€åœ¨ç”Ÿæ´»ä¸­å¤šè§€å¯Ÿï¼Œå°±èƒ½æ›´åŠ ç†è§£è‡ªé–‰ç—‡åŒå­¸çš„éœ€è¦ã€‚";
        badge = "â­ è‡ªé–‰ç—‡å‹å–„å¤§ä½¿ LV.2ï¼šé€²éšç‰ˆ";
      } else {
        msg = "é€™æ˜¯ä¸€å€‹é–‹å§‹ï¼Œåªè¦é¡˜æ„å­¸ç¿’å’Œç·´ç¿’ï¼Œä½ ä¹Ÿå¯ä»¥æˆç‚ºå¾ˆæ£’çš„å‹å–„å¤§ä½¿ã€‚å¯ä»¥å›å»é‡åšçœ‹çœ‹ï¼Œæ­é…ç§˜ç¬ˆä¸€èµ·å­¸ã€‚";
        badge = "â­ è‡ªé–‰ç—‡å‹å–„å¤§ä½¿ LV.1ï¼šå…¥é–€ç‰ˆ";
      }

      resultDetail.textContent = msg;
      badgeText.textContent = badge;
    }

    function sendResultToSheet() {
      if (!SCRIPT_URL || SCRIPT_URL.indexOf("script.google.com") === -1) {
        console.warn("SCRIPT_URL å°šæœªè¨­å®šæˆ–è¨­å®šéŒ¯èª¤ï¼Œç„¡æ³•é€å‡ºæˆç¸¾ã€‚");
        return;
      }

      const payload = {
        name: userName,
        score: score,
        total: questions.length,
        answers: answers
      };

      fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      }).catch(err => {
        console.error("é€å‡ºæˆç¸¾æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š", err);
      });
    }

    function restartQuiz() {
      startScreen.style.display = "block";
      quizScreen.style.display = "none";
      resultScreen.style.display = "none";
    }

    window.startQuiz = startQuiz;
    window.nextQuestion = nextQuestion;
    window.prevQuestion = prevQuestion;
    window.restartQuiz = restartQuiz;
  </script>
</body>
</html>
